setfpscap(10)
if not game:IsLoaded() then repeat game.Loaded:Wait() until game:IsLoaded() end

-- ปรับ true = เปิด
-- ปรับ false = ปิด

getgenv().Setting = { -- ตั้งค่าทั้วไป
    ['FPS Booster'] = true,
    ['White Screen'] = false,
    ['Disible Gui'] = true, -- ปิด Gui
    ['AFK Check'] = 150, -- ยืนนิ่งครบ 150วิจะทำการเตะ
    ['Lock Fruit'] = 1000000, -- ไม่ใช้ผลราคามากกว่า 1000000ขึ้นไปซื้อชิปลงดัน
    ['Rejoin'] = false -- Rejoin เมื่อโดนเตะ
}

getgenv().Quest = {
    ['RGB Haki'] = true, -- ทำฮาคิสี RGB
    ['Evo Race'] = {
        ['Enabled'] = true, -- ทำเผ่า
        ['Level'] = {1,2,3} -- ตั้งค่าทำเผ่าขั้น1ถึงขั้น3
    },
    ['Quest Dough Awaken'] = {
        ['Enabled'] = true, -- ทำโมจิตื่น
        ['Fast Mode'] = true -- ใช้ผลปีศาจ 1M ในการทำเควสโมจิตื่น
    },
    ['Kill Boss'] = true, -- ฟาร์มบอส
    ['Quest Race V4'] = true -- ทำเควสดึงคันโยก + หาเกียร์
}

getgenv().Fruit = { -- เลือกผลปีศาจ
    ['Main'] = {"Ice-Ice","Sand-Sand"}, -- ผลหลักถ้าเจอผลนี้ต่อไห้มีผลในตัวก็จะทำการกินผลนี้
    ['Select Fruit'] = {"Ice-Ice","Sand-Sand"}, -- เลือกผลปีศาจ
    ['Bring Fruit'] = true -- ดึงผลปีศาจ
}

getgenv().Melee = { -- ฟาร์มหมัด
    ['Superhuman'] = true,
    ['Death Step'] = true,
    ['Sharkman Karate'] = true,
    ['Electric Claw'] = true,
    ['Dragon Talon'] = true,
    ['Godhuman'] = true
}

getgenv().Sword = { -- ฟาร์มดาบ
    ['Saber'] = true,
    ['Midnight Blade'] = true,
    ['Shisui'] = true,
    ['Saddi'] = true,
    ['Wando'] = true,
    ['Yama'] = true,
    ['Koko'] = false,
    ['Rengoku'] = true,
    ['Canvander'] = true,
    ['Buddy Sword'] = true,
    ['Twin Hooks'] = true,
    ['SpikeyTrident'] = true,
    ['Hallow Scryte'] = true,
    ['Dark Dagger'] = true,
    ['Tushita'] = true,
    ['True Triple Katana'] = true,
    ['Cursed Dual Katana'] = true -- ทำดาบคู่
}

getgenv().Gun = { -- ฟาร์มปืน
    ['Kabucha'] = false,
    ['Acidum Rifle'] = false,
    ['Soul Guitar'] = false, -- ทำกีต้าร์บรู๊ค
    ['Serpent Bow'] = false
}

getgenv().Mastery = { -- ฟาร์มมาสเตอรี่
    ['Melee'] = true,
    ['Fruit'] = true,
    ['Sword'] = true,
    ['Setting Sword'] = { -- ตั้งค่าดาบที่ต้องการให้ฟาร์มมาสเตอรี่
        [1] = "Tushita",
        [2] = "Hallow Scythe",
        [3] = "Spikey Trident",
        [4] = "Dark Dagger",
        [5] = "Buddy Sword",
        [6] = "Yama",
        [7] = "Shisui",
        [8] = "Saddi",
        [9] = "Wando",
        [10] = "True Triple Katana",
        [11] = "Cursed Dual Katana",
        [12] = "Midnight Blade",
        [13] = "Rengoku",
        [14] = "Saber",
        [15] = "Canvander"
    },
    ['Gun'] = false,
    ['Setting Gun'] = { -- ตั้งค่าปืนที่ต้องการให้ฟาร์มมาสเตอรี่
        [1] = 'Soul Guitar',
        [2] = 'Kabucha',
        [3] = 'Acidum Rifle',
        [4] = 'Serpent Bow'
    }
}

_G.On_Next_Generation = true -- เปิดใช้งาน Script Next Generation
script_key="OwzaHmXBlTXjLTmFqpkofgQGTBSAWFjR";
loadstring(game:HttpGet("https://raw.githubusercontent.com/londnee/code/main/nextgeneration.lua"))();
local HttpService = game:GetService("HttpService")
local LocalPlayer = game:GetService('Players').LocalPlayer
local MeleeName = {}
local MeleeList = {}
local MeleeRequestList = {
    ["Death Step"] = "BuyDeathStep",
    ["Sharkman Karate"] = "BuySharkmanKarate",
    ["Electric Claw"] = "BuyElectricClaw",
    ["Dragon Talon"] = "BuyDragonTalon",
    ["Godhuman"] = "BuyGodhuman",
    ["Superhuman"] = "BuySuperhuman"
}
local function len(x)
    local q = 0
    for i, v in pairs(x) do
        q = q + 1
    end
    return q
end
local function getMeleeName() 
    table.clear(MeleeName)
    for i, v in pairs(MeleeRequestList) do 
        RequestMeleeName =  game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(v, true)
        if tonumber(RequestMeleeName) == 1 then 
            table.insert(MeleeName, i)
        end
    end
    return MeleeName
end
local function getLevel() 
    return LocalPlayer.Data.Level.Value
end 
local function getWorld() 
    if game.ReplicatedStorage.Remotes.CommF_:InvokeServer("DressrosaQuestProgress", "Dressrosa") == 0 and game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ZQuestProgress", "Zou") == 0 then
        World = 3
    elseif game.ReplicatedStorage.Remotes.CommF_:InvokeServer("DressrosaQuestProgress", "Dressrosa") == 0 and not game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ZQuestProgress", "Zou") == 0 then
        World = 2
    else
        World = 1
    end
    return World
end
local function split(str, sep)
    local result = {}
    local regex = ("([^%s]+)"):format(sep)
    for each in str:gmatch(regex) do
       table.insert(result, each)
    end
    return result
end
local function getFruitName ()
    if LocalPlayer:FindFirstChild("Backpack") then 
        for i,v in pairs(LocalPlayer:FindFirstChild("Backpack"):GetChildren()) do 
            if v.ToolTip == "Blox Fruit" then 
                return split(v.Name, "-")[1]
            end
        end
    end
    repeat wait() until LocalPlayer.Character
    if LocalPlayer.Character:FindFirstChildOfClass("Tool") then 
        local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if Tool.ToolTip == "Blox Fruit" then
            return split(Tool.Name, "-")[1]
        end
    end
    return 'None'
end
local function getFruitMaster ()
    if LocalPlayer:FindFirstChild("Backpack") then 
        for i,v in pairs(LocalPlayer:FindFirstChild("Backpack"):GetChildren()) do 
            if v.ToolTip == "Blox Fruit" then 
                if v:FindFirstChild("Level") then 
                    return v.Level.Value
                end
            end
        end
    end
    repeat wait() until LocalPlayer.Character
    if LocalPlayer.Character:FindFirstChildOfClass("Tool") then 
        local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if Tool.ToolTip == "Blox Fruit" then
            if Tool:FindFirstChild("Level") then 
                return Tool.Level.Value
            end
        end
    end
    return 0
end
local function getMeleeuse()
    if LocalPlayer:FindFirstChild("Backpack") then 
        for i,v in pairs(LocalPlayer:FindFirstChild("Backpack"):GetChildren()) do 
            if v.ToolTip == "Melee" then 
                return v.Name
            end
        end
    end
    repeat wait() until LocalPlayer.Character
    if LocalPlayer.Character:FindFirstChildOfClass("Tool") then 
        local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if Tool.ToolTip == "Melee" then
            return Tool.Name
        end
    end
    return 'Combat'
end
local function getMeleeMaster ()
    if LocalPlayer:FindFirstChild("Backpack") then 
        for i,v in pairs(LocalPlayer:FindFirstChild("Backpack"):GetChildren()) do 
            if v.ToolTip == "Melee" then 
                if v:FindFirstChild("Level") then 
                    return v.Level.Value
                end
            end
        end
    end
    repeat wait() until LocalPlayer.Character
    if LocalPlayer.Character:FindFirstChildOfClass("Tool") then 
        local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if Tool.ToolTip == "Melee" then
            if Tool:FindFirstChild("Level") then 
                return Tool.Level.Value
            end
        end
    end
    return 0
end
local function getSkillAwakenCount() 
    SkillAwakened = 0 
    getAwakenedAbilitiesRequests = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getAwakenedAbilities")
    if getAwakenedAbilitiesRequests then
        for i, v in pairs(getAwakenedAbilitiesRequests) do
            if v["Awakened"] then 
                    SkillAwakened = SkillAwakened + 1;
                end
            end
            return SkillAwakened, len(getAwakenedAbilitiesRequests)
        else
            return 0, 0
    end
end
local function findItem(item) 
    RequestGetInvertory = game:GetService("ReplicatedStorage").Remotes["CommF_"]:InvokeServer("getInventory")
    for i, __ in pairs(RequestGetInvertory) do
        if __["Name"] == item then
            return true
        end
    end
    return false
end
local function countMelee() 
    table.clear(MeleeList)
    for i, v in pairs(MeleeRequestList) do 
        MeleeRequests =  game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(v, true)
        if tonumber(MeleeRequests) == 1 then 
            MeleeList[v] = true
        end
    end
    return len(MeleeList)
end

local SwordList = {}
local function getSword()
    table.clear(SwordList)
    RequestGetInvertory = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getInventory")
    for i , v in pairs(RequestGetInvertory) do 
        if v['Type'] == "Sword" then 
            table.insert(SwordList, {
                Name =  v['Name'],
                Rarity = v['Rarity']
            })
        end
    end
    return SwordList
end
local FruitList = {}
local function getFruitList()
    table.clear(FruitList)
    RequestGetInvertory = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getInventory")
    for i , v in pairs(RequestGetInvertory) do 
        if v['Type'] == "Blox Fruit" then 
            table.insert(FruitList, {
                Name =  v['Name'],
                Rarity = v['Rarity']
            })
        end
    end
    return FruitList
end
local MaterialList = {}
local function getMaterialList()
    table.clear(MaterialList)
    RequestGetInvertory = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getInventory")
    for i , v in pairs(RequestGetInvertory) do 
        if v['Type'] == "Material" then 
            table.insert(MaterialList, {
                Name =  v['Name'],
                Rarity = v['Rarity']
            })
        end
    end
    return MaterialList
end
local AccessoryList = {}
local function getAccessoryList()
    table.clear(AccessoryList)
    RequestGetInvertory = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getInventory")
    for i , v in pairs(RequestGetInvertory) do 
        if v['Type'] == "Wear" then 
            table.insert(AccessoryList, {
                Name =  v['Name']
            })
        end
    end
    return AccessoryList
end
local function getAwakeend()
    SkillAwakened = 0 
    SkillAWakenedList = {}
    getAwakenedAbilitiesRequests = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getAwakenedAbilities")
    if getAwakenedAbilitiesRequests then
    for i, v in pairs(getAwakenedAbilitiesRequests) do
        if v["Awakened"] then 
                SkillAwakened = SkillAwakened + 1;
                table.insert(SkillAWakenedList, i)
            end
        end
    end   
    return SkillAWakenedList;
end
local function getSkillAwakenCount()
    SkillAwakened = 0 
    SkillAWakenedList = {}
    getAwakenedAbilitiesRequests = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("getAwakenedAbilities")
    if getAwakenedAbilitiesRequests then
    for i, v in pairs(getAwakenedAbilitiesRequests) do
            SkillAwakened = SkillAwakened + 1;
        end
    end   
    return SkillAwakened;
end
spawn(function() 
    while true do 
        local Melee = getMeleeName()
        local Level = getLevel()
        local World = getWorld()
        local Fruit = getFruitName()
        local SwordL = getSword()
        local FruitL = getFruitList()
        local MaterialL = getMaterialList()
        local AccessorieL = getAccessoryList()
        local Money = game:GetService("Players").LocalPlayer.Data.Beli.Value
        local Fragment = game:GetService("Players").LocalPlayer.Data.Fragments.Value
        local Awakeneds = getAwakeend()
        local cM = countMelee()
        local getFruitMasterx = getFruitMaster()
        local Race = game:GetService("Players").LocalPlayer.Data.Race.Value
        local mm = getMeleeMaster()
        local mn = getMeleeuse()
        local ac = getSkillAwakenCount()
        local Payload = {
                Account = LocalPlayer.Name,
                Melee = Melee,
                Level = Level,
                World = World,
                Fruit = Fruit,
                Inventory = {
                    ["Swords"] =  SwordL,
                    ["Fruit"] = FruitL,
                    ["Material"] = MaterialL,
                    ["Accessory"] = AccessorieL
                },
                countMelee = cM,
                Beli = Money,
                Fragment = Fragment, 
                Awakend = Awakeneds,
                Race = Race,
                FruitMastery = getFruitMasterx,
                MeleeMastery = mm,
                MeleeUse = mn,
                SkillCanAwake = ac,
		Machina = "Roblox2"
        }
       	UrlArgs = {
            Url = string.format("http://localhost:8080/inventory/%s", game.Players.LocalPlayer.Name),
            Method = "POST",
            Body = HttpService:JSONEncode(Payload),
            Headers = {
                ["Content-Type"] = "application/json"
            },  
        }
        r = request(UrlArgs)
        wait(2) 
    end 
end);
